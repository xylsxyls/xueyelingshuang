https://www.cnblogs.com/langqi250/p/7283697.html

下载地址
https://github.com/protocolbuffers/protobuf/releases



ProtoBuf安装使用说明

ProtoBuf由两个部件组成，一个是protoc，用于编译.proto，生成对应语言的代码；一个是各种语言各种系统对应的库。

1.   安装
1.1.   git安装
由于需要开源项目都使用git对代码进行管理，为了使用方便，首先在windows安装git。

目前Git已经可以在windows下使用，主要方法有二：msysgit和Cygwin，我们选择Cygwin。

从http://dlsw.baidu.com/sw-search-sp/soft/4e/30195/Git-2.7.2-32-bit_setup.1457942412.exe下载Git-2.7.2-32-bit_setup.1457942412.exe。

安装Git详细步骤参考如下安装示意图：

 

 

 

 

 

 

 

 

 

点击上图的“Finish”后Git的安装就完成了，安装完成后需要在进行一下环境变量的设置，将”C:\Program Files (x86)\Git\bin”加入环境变量PATH。

生成ssh公钥

双击桌面上的git运行程序：

 

启动git的运行程序：

 

在程序中依次输入：

1、配置email，命令如下：

   $git config --global user.name "your name"

   $git config --global user.email "your@email.address"

其中"your name"换成你的名字，"your@email.address"换成你的邮箱地址。

2、生成公钥，用于身份认证：

  ssh-keygen.exe -C "your@email.address" -t rsa

这样就可以在你的用户下取得需要的公钥匙，公钥位于你的电脑中“C:\Users\lenovo\.ssh”的“id_rsa.pub”文件中。

至此，Windows安装完成。

1.2.   windows ProtoBuf安装
启动git的运行程序，执行下面命令下载源码。

源码安装需要用到cmake工具，从官网下载cmake，解压缩，然后将cmake命令的路径加入环境变量PATH。

以管理员身份打开对应VS版本的“VS2013 x86 本机工具命令提示(VS2013 开发人员命令提示)”，切换到ProtoBuf编译的目录：

注意：必须选择正确的命令提示。

C:\Windows\system32>f:

F:\>mkdir install

F:\>cd install

下载源码：

F:\install>git clone https://github.com/google/protobuf.git

注：ProtoBuf的源码安装方法参照它的REDEME。

切换目录，下载gmock(ProtoBuf unit-tests需要gmock构建)，切换目录到gmock目录，然后下载gtest

F:\install>cd protobuf

F:\install\protobuf>git clone -b release-1.7.0 https://github.com/google/googlemock.git gmock

F:\install\protobuf>cd gmock

F:\install\protobuf\gmock>git clone -b release-1.7.0 https://github.com/google/googletest.git gtest

切换到目录“protobuf”目录下，进入目录“cmake”，创建目录“build”，切换到目录”build”。

F:\install\protobuf\gmock>cd ..

F:\install\protobuf >cd cmake

F:\install\protobuf\cmake>mkdir build

F:\install\protobuf\cmake>cd build

F:\install\protobuf\cmake\build>

生成“Release”版本，会生成VS的解决方案文件“protobuf.sln”在当前目录。

F:\install\protobuf\cmake\build>mkdir release

F:\install\protobuf\cmake\build>cd release

F:\install\protobuf\cmake\build\release>cmake -G "NMake Makefiles" -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=../../../../install ../..

F:\install\protobuf\cmake\build\release>cd ..

F:\install\protobuf\cmake\build>mkdir solution

F:\install\protobuf\cmake\build>cd solution

F:\install\protobuf\cmake\build\solution>cmake -G "Visual Studio 12 2013 Win64" -DCMAKE_INSTALL_PREFIX=../../../../install ../..

生成”Debug”版本，会生成VS的解决方案文件“protobuf.sln”在当前目录。

F:\install\protobuf\cmake\build>mkdir debug

F:\install\protobuf\cmake\build>cd debug

F:\install\protobuf\cmake\build\debug> cmake -G "NMake Makefiles" -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=../../../../install ../..

F:\install\protobuf\cmake\build\debug>cd ..

F:\install\protobuf\cmake\build>mkdir solution

F:\install\protobuf\cmake\build>cd solution

F:\install\protobuf\cmake\build\solution>cmake -G "Visual Studio 12 2013 Win64" -DCMAKE_INSTALL_PREFIX=../../../../install ../..

注：Release和Debug请选择一种方式。

编译protobuf：

F:\install\protobuf\cmake\build\solution>cd ..

F:\install\protobuf\cmake\build>cd release

F:\install\protobuf\cmake\build\release>nmake

F:\install\protobuf\cmake\build\release>nmake check

F:\install\protobuf\cmake\build\release>nmake install

or：

F:\install\protobuf\cmake\build\solution>cd ..

F:\install\protobuf\cmake\build>cd debug

F:\install\protobuf\cmake\build\debug>nmake

F:\install\protobuf\cmake\build\debug>nmake check

F:\install\protobuf\cmake\build\debug>nmake install

在f:\install\install下会生成编译后的文件，包含三个目录bin、include、lib，分别存储命令protoc命令、头文件、静态库。

注：生成的是静态库，由于Windows各个版本的实现的不同，使用时请使用静态库(如果生成动态库，只需要在cmake命令中添加参数“-Dprotobuf_BUILD_SHARED_LIBS=ON”)。

使用时，配置项目属性：项目属性 -> 配置属性 -> C/C++ -> 代码生成 -> 运行库，设置为： 多线程调试(/MTd)

1.3.   Linux ProtoBuf安装
Linux安装需要用到autoconf、automake、libtool和curl(用于下载gmock，可以在Windows下下载好gmock，就不需要curl了)。

将windows下通过git下载的源码传入Linux下，进入目录protobuf，然后以root用户执行以下的命令：

$ ./autogen.sh

$ ./configure

$ make

$ make check

$ make install

$ ldconfig

这样安装在了/usr/local目录下，头文件在/usr/local/include下的“google”目录，头文件引用时直接引用这个目录就可以；库文件为目录/usr/local/lib下的libprotobuf-lite.so和libprotobuf.so；protoc命令在/usr/local/bin下。

1.4.   windows Java ProtoBuf安装
下载源码，参考Windows ProtoBuf安装；Java的安装过程参考文件/protobuf/java/README.md。

l  使用Maven安装

Java安装ProtoBuf需要工具Maven，需要先安装Maven。

将Windows下生成的protoc.exe拷贝到目录/protobuf/src下，在目录/protobuf/java/下执行：

mvn test

mvn instll

mvn package(生成.jar包)

在目录F:\install\protobuf\java\core\target生成protobuf-java-3.0.0-beta-2.jar

在目录F:\install\protobuf\java\lite\target下生成protobuf-lite-3.0.0-beta-2.jar

也可以使用ecplise打开项目，然后执行编译和打包。

 

分类: c/c++
好文要顶 关注我 收藏该文    
mugua250
关注 - 14
粉丝 - 9
+加关注
0 0
? 上一篇：ZeroMQ安装说明
? 下一篇：Protobuf使用手册
posted @ 2017-08-04 10:34 mugua250 阅读(1147) 评论(0) 编辑 收藏
刷新评论刷新页面返回顶部
注册用户登录后才能发表评论，请 登录 或 注册，访问网站首页。
【推荐】超50万VC++源码: 大型组态工控、电力仿真CAD与GIS源码库！
【免费】要想入门学习Linux系统技术，你应该先选择一本适合自己的书籍
【前端】SpreadJS表格控件，可嵌入应用开发的在线Excel
【直播】如何快速接入微信支付功能
腾讯云
最新IT新闻:
・ 美团进化之路：面对与阿里的碰撞，等待它的是生存还是死亡？
・ 李笑来：个人不会做任何项目投资 准备花时间转行
・ 阅文集团155亿元买下新丽传媒后续：喜忧参半
・ 头条悄悄上线3款小游戏，中心化还是去中心化？
・ 微软很快将向企业客户提供精简版Windows 10
? 更多新闻...
华为云C2_0929
最新知识库文章:
・ 为什么说 Java 程序员必须掌握 Spring Boot ？
・ 在学习中，有一个比掌握知识更重要的能力
・ 如何招到一个靠谱的程序员
・ 一个故事看懂“区块链”
・ 被踢出去的用户
? 更多知识库文章...